handler = Gmaps.build('Google');
handler.buildMap({ 
  internal: {id: 'map'},
  provider: {
    backgroundColor: "#021019",
    zoom: 2,
    mapTypeId: google.maps.MapTypeId.ROADMAP,
    panControl: false,
    zoomControlOptions: {position:google.maps.ControlPosition.BOTTOM_LEFT,
                         style:google.maps.ZoomControlStyle.SMALL 
                         },
    styles: [{"featureType":"water","stylers":[{"visibility":"on"},{"color":"#acbcc9"}]},{"featureType":"landscape","stylers":[{"color":"#f2e5d4"}]},{"featureType":"road.highway","elementType":"geometry","stylers":[{"color":"#c5c6c6"}]},{"featureType":"road.arterial","elementType":"geometry","stylers":[{"color":"#e4d7c6"}]},{"featureType":"road.local","elementType":"geometry","stylers":[{"color":"#fbfaf7"}]},{"featureType":"poi.park","elementType":"geometry","stylers":[{"color":"#c5dac6"}]},{"featureType":"administrative","stylers":[{"visibility":"on"},{"lightness":33}]},{"featureType":"road"},{"featureType":"poi.park","elementType":"labels","stylers":[{"visibility":"on"},{"lightness":20}]},{},{"featureType":"road","stylers":[{"lightness":20}]}]   
  }
}, 
  function(){
    marker = handler.addMarker({
       lat: <%= current_user.lat %>,
       lng: <%= current_user.long %>,
       picture: {
         url: "http://i.imgur.com/vebhdRE.png?1",
         width: 60,
         height: 60
       },
     })
     markers = handler.addMarkers(<%=raw hash.to_json %>)
     handler.bounds.extendWith(markers);
  }
);
